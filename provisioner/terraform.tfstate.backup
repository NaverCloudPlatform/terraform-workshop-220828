{
  "version": 4,
  "terraform_version": "1.2.5",
  "serial": 78,
  "lineage": "621dceea-3060-e9d1-42bd-4364b88d9ec0",
  "outputs": {},
  "resources": [
    {
      "mode": "data",
      "type": "terraform_remote_state",
      "name": "infra",
      "provider": "provider[\"terraform.io/builtin/terraform\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "backend": "local",
            "config": {
              "value": {
                "path": "../infra/terraform.tfstate"
              },
              "type": [
                "object",
                {
                  "path": "string"
                }
              ]
            },
            "defaults": null,
            "outputs": {
              "value": {
                "server_rootpws": {
                  "svr-workshop-bastion-001": "T9%=NTYM9%9t",
                  "svr-workshop-worker-001": "G33+T7%*iiu6e",
                  "svr-workshop-worker-002": "M7+q!qUtih",
                  "svr-workshop-worker-003": "L5ey@*ghmYLfu"
                },
                "servers": {
                  "svr-workshop-bastion-001": {
                    "id": "12164814",
                    "name": "svr-workshop-bastion-001",
                    "private_ip": "10.0.0.6",
                    "public_ip": "101.79.10.41"
                  },
                  "svr-workshop-worker-001": {
                    "id": "12164795",
                    "name": "svr-workshop-worker-001",
                    "private_ip": "10.0.1.10",
                    "public_ip": ""
                  },
                  "svr-workshop-worker-002": {
                    "id": "12164789",
                    "name": "svr-workshop-worker-002",
                    "private_ip": "10.0.1.9",
                    "public_ip": ""
                  },
                  "svr-workshop-worker-003": {
                    "id": "12164791",
                    "name": "svr-workshop-worker-003",
                    "private_ip": "10.0.1.11",
                    "public_ip": ""
                  }
                }
              },
              "type": [
                "object",
                {
                  "server_rootpws": [
                    "object",
                    {
                      "svr-workshop-bastion-001": "string",
                      "svr-workshop-worker-001": "string",
                      "svr-workshop-worker-002": "string",
                      "svr-workshop-worker-003": "string"
                    }
                  ],
                  "servers": [
                    "object",
                    {
                      "svr-workshop-bastion-001": [
                        "object",
                        {
                          "id": "string",
                          "name": "string",
                          "private_ip": "string",
                          "public_ip": "string"
                        }
                      ],
                      "svr-workshop-worker-001": [
                        "object",
                        {
                          "id": "string",
                          "name": "string",
                          "private_ip": "string",
                          "public_ip": "string"
                        }
                      ],
                      "svr-workshop-worker-002": [
                        "object",
                        {
                          "id": "string",
                          "name": "string",
                          "private_ip": "string",
                          "public_ip": "string"
                        }
                      ],
                      "svr-workshop-worker-003": [
                        "object",
                        {
                          "id": "string",
                          "name": "string",
                          "private_ip": "string",
                          "public_ip": "string"
                        }
                      ]
                    }
                  ]
                }
              ]
            },
            "workspace": null
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "mode": "managed",
      "type": "null_resource",
      "name": "configure_cla_for_all_servers",
      "provider": "provider[\"registry.terraform.io/hashicorp/null\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "3454403886834959280",
            "triggers": {
              "files": "80174809005b811cb8e2dddfb2bf8b1ac3ee3628"
            }
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "data.terraform_remote_state.infra",
            "null_resource.install_packages_on_bastion",
            "null_resource.set_ansible_inventory_on_bastion",
            "null_resource.ssh_copy_id_from_bastion_to_workers"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "null_resource",
      "name": "install_packages_on_bastion",
      "provider": "provider[\"registry.terraform.io/hashicorp/null\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "6734983132255519702",
            "triggers": {
              "files": "1ef9d9de1ca038f71a3868e68e3e47288bdb6c63",
              "variables": "{\"pip_packages\":[\"setuptools_rust\",\"ansible\"],\"snap_packages\":[],\"yum_packages\":[]}"
            }
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "data.terraform_remote_state.infra"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "null_resource",
      "name": "set_ansible_inventory_on_bastion",
      "provider": "provider[\"registry.terraform.io/hashicorp/null\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "1355225703229539901",
            "triggers": {
              "files": "193ce5fd2896e0da5ceacae89282c400cf548062",
              "variables": "{\"svr-workshop-bastion-001\":{\"id\":\"12164814\",\"name\":\"svr-workshop-bastion-001\",\"private_ip\":\"10.0.0.6\",\"public_ip\":\"101.79.10.41\"},\"svr-workshop-worker-001\":{\"id\":\"12164795\",\"name\":\"svr-workshop-worker-001\",\"private_ip\":\"10.0.1.10\",\"public_ip\":\"\"},\"svr-workshop-worker-002\":{\"id\":\"12164789\",\"name\":\"svr-workshop-worker-002\",\"private_ip\":\"10.0.1.9\",\"public_ip\":\"\"},\"svr-workshop-worker-003\":{\"id\":\"12164791\",\"name\":\"svr-workshop-worker-003\",\"private_ip\":\"10.0.1.11\",\"public_ip\":\"\"}}"
            }
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "data.terraform_remote_state.infra"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "null_resource",
      "name": "set_etc_hosts_on_all_servers",
      "provider": "provider[\"registry.terraform.io/hashicorp/null\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "8638859214933257326",
            "triggers": {
              "files": "5b4e7f7f32ce0c7378070861bda10d98ef7eca00",
              "variables": "{\"svr-workshop-bastion-001\":{\"id\":\"12164814\",\"name\":\"svr-workshop-bastion-001\",\"private_ip\":\"10.0.0.6\",\"public_ip\":\"101.79.10.41\"},\"svr-workshop-worker-001\":{\"id\":\"12164795\",\"name\":\"svr-workshop-worker-001\",\"private_ip\":\"10.0.1.10\",\"public_ip\":\"\"},\"svr-workshop-worker-002\":{\"id\":\"12164789\",\"name\":\"svr-workshop-worker-002\",\"private_ip\":\"10.0.1.9\",\"public_ip\":\"\"},\"svr-workshop-worker-003\":{\"id\":\"12164791\",\"name\":\"svr-workshop-worker-003\",\"private_ip\":\"10.0.1.11\",\"public_ip\":\"\"}}"
            }
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "data.terraform_remote_state.infra",
            "null_resource.install_packages_on_bastion",
            "null_resource.set_ansible_inventory_on_bastion",
            "null_resource.ssh_copy_id_from_bastion_to_workers"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "null_resource",
      "name": "ssh_copy_id_from_bastion_to_workers",
      "provider": "provider[\"registry.terraform.io/hashicorp/null\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "4240661361540890203",
            "triggers": {
              "files": "4dd852c2b99a547493edd67899cff905423d79d7",
              "variables": "{\"svr-workshop-bastion-001\":\"T9%=NTYM9%9t\",\"svr-workshop-worker-001\":\"G33+T7%*iiu6e\",\"svr-workshop-worker-002\":\"M7+q!qUtih\",\"svr-workshop-worker-003\":\"L5ey@*ghmYLfu\"}"
            }
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "triggers"
              },
              {
                "type": "index",
                "value": {
                  "value": "variables",
                  "type": "string"
                }
              }
            ]
          ],
          "private": "bnVsbA==",
          "dependencies": [
            "data.terraform_remote_state.infra"
          ]
        }
      ]
    }
  ]
}
